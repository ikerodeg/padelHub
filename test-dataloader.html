<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <title>Test DataLoader - Paso 4 FINAL</title>
  <style>
    body {
      font-family: system-ui;
      font-size: 2rem;
      padding: 2rem;
      background: #0a0a0a;
      color: #fff;
      text-align: center;
    }

    button {
      padding: 2rem;
      margin: 4rem;
      font-size: 2rem;
      cursor: pointer;
      border-radius: 1rem;
      border: none;
    }

    .primary {
      background: #3b82f6;
      color: white;
    }

    .secondary {
      background: #84cc16;
      color: black;
    }

    .danger {
      background: #ef4444;
      color: white;
    }

    h1 {
      font-size: 1.5rem;
      margin-bottom: 2rem;
    }

    p {
      color: #888;
      margin-bottom: 1rem;
    }
  </style>
</head>

<body>
  <h1>üß™ Test DataLoader - Sistema Completo</h1>
  <p>Abre la consola (F12) para ver los logs detallados</p>

  <button class="primary" onclick="testInitialize()">
    1Ô∏è‚É£ Inicializar App (usa cache si existe)
  </button>

  <button class="secondary" onclick="testRefresh()">
    üîÑ Forzar Actualizaci√≥n (ignora cache)
  </button>

  <button class="danger" onclick="clearAndReload()">
    üóëÔ∏è Limpiar todo y recargar p√°gina
  </button>

  <script type="module">
    import { initializeAppData, refreshData } from './src/js/utils/dataLoader.js';

    // Inicializar (usa cache)
    window.testInitialize = async function () {
      console.clear();
      console.log('üß™ TEST: initializeAppData()');
      console.log('');
      try {
        const allData = await initializeAppData();
        console.log('');
        console.log('üéâ TEST EXITOSO');
        console.log('üì¶ Datos disponibles:', allData);
      } catch (error) {
        console.error('üí• TEST FALLIDO:', error);
      }
    }

    // Refrescar (ignora cache)
    window.testRefresh = async function () {
      console.clear();
      console.log('üß™ TEST: refreshData()');
      console.log('');
      try {
        const allData = await refreshData();
        console.log('');
        console.log('üéâ TEST EXITOSO');
        console.log('üì¶ Datos actualizados:', allData);
      } catch (error) {
        console.error('üí• TEST FALLIDO:', error);
      }
    }

    // Limpiar y recargar
    window.clearAndReload = function () {
      localStorage.clear();
      console.clear();
      console.log('üóëÔ∏è Cache limpiado completamente');
      console.log('üîÑ Recargando p√°gina...');
      setTimeout(() => location.reload(), 1000);
    }

    // Ejecutar autom√°ticamente al cargar
    testInitialize();
  </script>
</body>

</html>