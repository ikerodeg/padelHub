<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">

  <!-- PWA Manifest -->
  <link rel="manifest" href="../manifest.json">
  <meta name="theme-color" content="#ccff00">
  <!-- iOS / Safari Support -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="PadelHub">
  <link rel="apple-touch-icon" sizes="180x180" href="../assets/img/icons/apple-icon-180.png">
  <!-- iPhone Splash Screens -->
  <link rel="apple-touch-startup-image" href="../assets/img/icons/apple-splash-1170-2532.png"
    media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
  <link rel="apple-touch-startup-image" href="../assets/img/icons/apple-splash-1284-2778.png"
    media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
  <link rel="apple-touch-startup-image" href="../assets/img/icons/apple-splash-1125-2436.png"
    media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">

  <title>Login - PadelHub</title>

  <!-- Reset y variables -->
  <link rel="stylesheet" href="../src/css/normalize.css">
  <link rel="stylesheet" href="../src/css/variables.css">

  <!-- Componentes -->
  <link rel="stylesheet" href="../src/css/components/baseLayout.css">
  <link rel="stylesheet" href="../src/css/components/buttons.css">
  <link rel="stylesheet" href="../src/css/components/forms.css">

  <!-- Page CSS -->
  <link rel="stylesheet" href="../src/css/pages/login.css">
  <link rel="stylesheet" href="../src/css/style.css">
</head>

<body>
  <main class="login-page">
    <!-- Background -->
    <div class="background-wrapper">
      <div class="background-overlay"></div>
      <div class="background-blur"></div>
    </div>

    <!-- Contenido Principal -->
    <div class="login-container">
      <header class="login-header">
        <img src="../assets/img/icons/logo.png" alt="PadelHub Logo" class="login-logo">
        <h1 class="login-title">PADEL<span class="highlight">HUB</span></h1>
        <p class="login-subtitle">Inicia sesión</p>
      </header>

      <!-- Vista de Selección de Jugador -->
      <div id="player-selection-view">
        <div class="form-group">
          <label for="player-dropdown" class="form-label">¿Quién eres?</label>
          <div class="input-wrapper">
            <select id="player-dropdown" class="input input-lg select">
              <option value="" disabled selected>Selecciona tu nombre...</option>
              <!-- Los jugadores se cargarán dinámicamente aquí (Samu Coach incluido) -->
            </select>
          </div>
        </div>
      </div>

      <!-- Vista de Password (oculta inicialmente) -->
      <div id="password-view" class="password-view" style="display: none;">
        <div class="selected-user-info">
          <div id="selected-user-avatar" class="player-login-avatar"></div>
          <h2 id="selected-user-name" class="selected-user-name">Nombre Usuario</h2>
        </div>

        <div class="password-input-group">
          <label for="login-password" class="form-label">Introduce tu contraseña</label>
          <div class="password-wrapper">
            <input type="password" id="login-password" class="input input-lg" placeholder="••••••••">
            <button type="button" id="toggle-password-btn" class="toggle-password-btn" aria-label="Mostrar contraseña">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"></path>
                <circle cx="12" cy="12" r="3"></circle>
              </svg>
            </button>
          </div>
          <p id="password-error" class="password-error-msg" style="display: none;">Contraseña incorrecta</p>
        </div>

        <div class="password-actions">
          <button id="confirm-password-btn" class="btn btn-success btn-lg btn-full">ENTRAR</button>
          <button id="back-to-players-btn" class="btn btn-danger btn-lg btn-full">CANCELAR</button>
        </div>
      </div>
    </div>

    <footer>
      <p class="footer-text">PadelHub 2026 &copy;</p>
    </footer>
  </main>

  <script src="../src/js/pages/login.js" type="module"></script>
  
  <!-- Service Worker Update Handler -->
  <script type="module">
    import { initServiceWorkerUpdateHandler } from '../src/js/utils/swUpdateHandler.js';
    initServiceWorkerUpdateHandler();
  </script>
</body>

</html>